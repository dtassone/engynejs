<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>EngyneJs by dtassone</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>EngyneJs</h1>
        <h2>Be fluent in selenium testing!</h2>
        <a href="https://github.com/dtassone/engynejs" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <p>Fluent api built to create acceptance tests.</p>

<p>It is based on selenium-webdriver and execute every tasks in the control flows.</p>

<p>More info <a href="https://code.google.com/p/selenium/wiki/WebDriverJs#Control_Flows">https://code.google.com/p/selenium/wiki/WebDriverJs#Control_Flows</a></p>

<p>It is also using chai utils method which allows to add chainable methods or properties.</p>

<p><a href="https://github.com/chaijs/chai/tree/master/lib/chai/utils">https://github.com/chaijs/chai/tree/master/lib/chai/utils</a></p>

<p>The /runner class builds the client api and start a local selenium webserver in child process.
Configuration properties available in /config.properties
All this properties are overridable by passing an object options in the Runner constructor.</p>

<h2>
<a id="it-requires-the-following-files" class="anchor" href="#it-requires-the-following-files" aria-hidden="true"><span class="octicon octicon-link"></span></a>It requires the following files</h2>

<ul>
<li>selenium-server-standalone-2.40.0.jar - <a href="http://docs.seleniumhq.org/download/">http://docs.seleniumhq.org/download/</a>
</li>
<li>chromedriver.exe - <a href="https://code.google.com/p/selenium/wiki/ChromeDriver">https://code.google.com/p/selenium/wiki/ChromeDriver</a>
</li>
<li>phantomjs.exe - <a href="http://phantomjs.org/download.html">http://phantomjs.org/download.html</a>
</li>
</ul>

<h3>
<a id="require-the-runner-object" class="anchor" href="#require-the-runner-object" aria-hidden="true"><span class="octicon octicon-link"></span></a>Require the runner object</h3>

<p>The Runner object allows to configure the selenium server and the selenium webdriver used behind the client api.</p>

<pre><code>var conf = {
    "browser" : "chrome"
    , "seleniumJarPath": "c:\\...\\resources\\selenium-server-standalone-2.40.0.jar"
    , "phantomExecutable": "c:\\...\\resources\\phantomjs.exe"
    , "screenshotFailedTest": true
};

require("am-webdriver/runner").setConfig(conf);
</code></pre>

<h2>
<a id="api" class="anchor" href="#api" aria-hidden="true"><span class="octicon octicon-link"></span></a>API</h2>

<h3>
<a id="require-the-client-object" class="anchor" href="#require-the-client-object" aria-hidden="true"><span class="octicon octicon-link"></span></a>Require the client object</h3>

<p>Get a singleton instance of the client object</p>

<pre><code>var client = require("am-webdriver").client;
</code></pre>

<h4>
<a id="using-the-factory" class="anchor" href="#using-the-factory" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using the factory</h4>

<p>You can get a singleton instance</p>

<pre><code>var factory = require("am-webdriver").factory;
var client = factory.getInstance();
//OR
var client = factory.getClient();
</code></pre>

<p>You can also get a new instance. Please note that you will need to reinstall your custom commands...</p>

<pre><code>var factory = require("am-webdriver").factory;
var client = factory.newInstance();
//OR
var client = factory.newClient();
</code></pre>

<h3>
<a id="commands" class="anchor" href="#commands" aria-hidden="true"><span class="octicon octicon-link"></span></a>Commands</h3>

<h4>
<a id="click" class="anchor" href="#click" aria-hidden="true"><span class="octicon octicon-link"></span></a>click()</h4>

<p>trigger the click event on an element.
ie.</p>

<pre><code>client.click(".my-css-selector")
client.element(".my-css-selector").click()
</code></pre>

<h4>
<a id="clicktext" class="anchor" href="#clicktext" aria-hidden="true"><span class="octicon octicon-link"></span></a>clickText(...)</h4>

<p>Search for argument text on the page and trigger a click on the element containing it</p>

<pre><code>client.clickText("homepage")
</code></pre>

<h4>
<a id="close" class="anchor" href="#close" aria-hidden="true"><span class="octicon octicon-link"></span></a>close()</h4>

<p>close the driver and the browser window</p>

<pre><code>client.close()
</code></pre>

<h4>
<a id="element" class="anchor" href="#element" aria-hidden="true"><span class="octicon octicon-link"></span></a>element(...)</h4>

<p>find and select the first element matching the selector</p>

<pre><code>client.element("my-selector")
</code></pre>

<h4>
<a id="attribute" class="anchor" href="#attribute" aria-hidden="true"><span class="octicon octicon-link"></span></a>attribute(...)</h4>

<p>Alias: attr
Get the attribute value of a pre selected element</p>

<pre><code>client.element("my-selector").attribute("style")
</code></pre>

<h4>
<a id="hover" class="anchor" href="#hover" aria-hidden="true"><span class="octicon octicon-link"></span></a>hover()</h4>

<p>trigger the mouseover event on an element</p>

<pre><code>client.element(".button-ok").hover();
</code></pre>

<h4>
<a id="elements" class="anchor" href="#elements" aria-hidden="true"><span class="octicon octicon-link"></span></a>elements(...)</h4>

<p>find a collection of elements matching the selector
Used in combination with the index command, first or last property</p>

<pre><code>client.elements("my-selector")

client.elements("my-grid-rows").index(0)
client.elements("my-grid-rows").first
</code></pre>

<h4>
<a id="indexn" class="anchor" href="#indexn" aria-hidden="true"><span class="octicon octicon-link"></span></a>index(n)</h4>

<p>select the element n of a pre selected collection of element</p>

<pre><code>client.elements("my-grid-rows").index(0)
</code></pre>

<h4>
<a id="open" class="anchor" href="#open" aria-hidden="true"><span class="octicon octicon-link"></span></a>open(...)</h4>

<p>open a url in the browser</p>

<pre><code>client.open("http://google.com")
</code></pre>

<h4>
<a id="sleepn" class="anchor" href="#sleepn" aria-hidden="true"><span class="octicon octicon-link"></span></a>sleep(n)</h4>

<p>Alias: pause(n)
pause the driver process for n ms</p>

<pre><code>client.sleep(1000)
</code></pre>

<h4>
<a id="presskey" class="anchor" href="#presskey" aria-hidden="true"><span class="octicon octicon-link"></span></a>pressKey(...)</h4>

<p>triggers a special key press, ENTER TAB CTRL... to test keyboard navigation</p>

<pre><code>    client.pressKey("TAB")
</code></pre>

<h4>
<a id="find" class="anchor" href="#find" aria-hidden="true"><span class="octicon octicon-link"></span></a>find(...)</h4>

<p>search for a collection of element within one element.</p>

<pre><code>client.element("my-grid-container").find(".row")
</code></pre>

<h4>
<a id="select" class="anchor" href="#select" aria-hidden="true"><span class="octicon octicon-link"></span></a>select(...)</h4>

<p>search for a sub element within one element.</p>

<pre><code>client.element("my-grid-container").select(".row:first")
</code></pre>

<h4>
<a id="selecttext" class="anchor" href="#selecttext" aria-hidden="true"><span class="octicon octicon-link"></span></a>selectText(...)</h4>

<p>search for a sub element by its content text within one element.</p>

<pre><code>client.element("button").selectText("Cancel")
</code></pre>

<h4>
<a id="thencallback" class="anchor" href="#thencallback" aria-hidden="true"><span class="octicon octicon-link"></span></a>then(callback)</h4>

<p>execute a custom callback in the flow</p>

<pre><code>client.then(breakStreamingConnection)
</code></pre>

<h4>
<a id="type" class="anchor" href="#type" aria-hidden="true"><span class="octicon octicon-link"></span></a>type(...)</h4>

<p>type a text within an input field</p>

<pre><code>client.element("input.description").type("am-webdriver is cool!")
</code></pre>

<h4>
<a id="waitselector-n" class="anchor" href="#waitselector-n" aria-hidden="true"><span class="octicon octicon-link"></span></a>wait(selector, n)</h4>

<p>pause the control flow until the css selector is found, and timeout if not found.</p>

<pre><code>client.open("http://google.com").wait("input.search", 10000)
</code></pre>

<h4>
<a id="screenshot" class="anchor" href="#screenshot" aria-hidden="true"><span class="octicon octicon-link"></span></a>screenshot()</h4>

<p>take a screenshot of the current page</p>

<pre><code>client.open("http://google.com").screenshot()
</code></pre>

<h4>
<a id="global" class="anchor" href="#global" aria-hidden="true"><span class="octicon octicon-link"></span></a>global(...)</h4>

<p>pre load a window property that may be used in assertion</p>

<h4>
<a id="asserts-are-commands-used-to-test-the-property-of-an-element" class="anchor" href="#asserts-are-commands-used-to-test-the-property-of-an-element" aria-hidden="true"><span class="octicon octicon-link"></span></a>Asserts are commands used to test the property of an element</h4>

<h4>
<a id="contains" class="anchor" href="#contains" aria-hidden="true"><span class="octicon octicon-link"></span></a>contains(...)</h4>

<p>Alias:  contain, include
Check is the pre stated property include the exected value</p>

<pre><code>client.element("input").cssClass.contains("error");
</code></pre>

<h4>
<a id="equal" class="anchor" href="#equal" aria-hidden="true"><span class="octicon octicon-link"></span></a>equal(...)</h4>

<p>Check is the pre stated property strictly equal the expected value</p>

<pre><code>client.element("title").text.equal("Hello World!");
</code></pre>

<h4>
<a id="belown" class="anchor" href="#belown" aria-hidden="true"><span class="octicon octicon-link"></span></a>below(n)</h4>

<p>Check is the pre stated property is below n (operator used is &lt;)</p>

<pre><code>client.elements("li").length.should.be.below(10);
</code></pre>

<h4>
<a id="aboven" class="anchor" href="#aboven" aria-hidden="true"><span class="octicon octicon-link"></span></a>above(n)</h4>

<p>Check is the pre stated property is above n (operator used is &gt;)</p>

<pre><code>client.elements("li").length.should.be.above(10);
</code></pre>

<h4>
<a id="leastn" class="anchor" href="#leastn" aria-hidden="true"><span class="octicon octicon-link"></span></a>least(n)</h4>

<p>Check is the pre stated property is at least n (operator used is &gt;=)</p>

<pre><code>client.elements("li").length.should.be.at.least(1);
</code></pre>

<h4>
<a id="mostn" class="anchor" href="#mostn" aria-hidden="true"><span class="octicon octicon-link"></span></a>most(n)</h4>

<p>Check is the pre stated property is at most n (operator used is &lt;=)</p>

<pre><code>client.elements("li").length.should.be.at.most(10);
</code></pre>

<h4>
<a id="startwith" class="anchor" href="#startwith" aria-hidden="true"><span class="octicon octicon-link"></span></a>startWith(...)</h4>

<p>Check is the pre stated property starts with string</p>

<pre><code>client.element("title").text.should.startWith("Hello");
</code></pre>

<h4>
<a id="endwith" class="anchor" href="#endwith" aria-hidden="true"><span class="octicon octicon-link"></span></a>endWith(...)</h4>

<p>Check is the pre stated property ends with string</p>

<pre><code>client.element("title").text.should.endWith("World!");
</code></pre>

<h3>
<a id="properties" class="anchor" href="#properties" aria-hidden="true"><span class="octicon octicon-link"></span></a>Properties</h3>

<h4>
<a id="activeelement" class="anchor" href="#activeelement" aria-hidden="true"><span class="octicon octicon-link"></span></a>activeElement</h4>

<p>Returns the currently focused element, that is, the element that will get keystroke events if the user types any.</p>

<pre><code>client.activeElement.cssClass.should.contain("field-whatever");
</code></pre>

<h4>
<a id="parent" class="anchor" href="#parent" aria-hidden="true"><span class="octicon octicon-link"></span></a>parent</h4>

<p>Select the parent element of the pre selected element</p>

<pre><code>client.element("li:first").parent.cssClass.should.contain("list-wrapper");
</code></pre>

<h4>
<a id="cssclass" class="anchor" href="#cssclass" aria-hidden="true"><span class="octicon octicon-link"></span></a>cssClass</h4>

<p>Returns the class attribute value of an element</p>

<pre><code>client.element(".title").cssClass.should.equal("title and whatever-other-class applied-on-the-element");
</code></pre>

<h4>
<a id="isenabled" class="anchor" href="#isenabled" aria-hidden="true"><span class="octicon octicon-link"></span></a>isEnabled</h4>

<p>Returns true if the element is enabled and false if not</p>

<pre><code>client.element(".disabled-field").isEnabled.should.equal(false);
</code></pre>

<h4>
<a id="inspectedelement" class="anchor" href="#inspectedelement" aria-hidden="true"><span class="octicon octicon-link"></span></a>inspectedElement</h4>

<p>Returns the pre selected element</p>

<pre><code>client.element("div.that-listen-to-change")
//to access it via a property, you shouldn't need to use this property
client.inspectedElement
</code></pre>

<h4>
<a id="first" class="anchor" href="#first" aria-hidden="true"><span class="octicon octicon-link"></span></a>first</h4>

<p>Returns the first element of a pre selected collection of element</p>

<pre><code>client.elements("li").first.text.should.equal("first item");
</code></pre>

<h4>
<a id="last" class="anchor" href="#last" aria-hidden="true"><span class="octicon octicon-link"></span></a>last</h4>

<p>Returns the last element of a pre selected collection of element</p>

<pre><code>client.elements("li").first.text.should.equal("first item");
</code></pre>

<h4>
<a id="length" class="anchor" href="#length" aria-hidden="true"><span class="octicon octicon-link"></span></a>length</h4>

<p>Returns the number of elements of the pre selected collection of element</p>

<pre><code>client.elements("li").length.should.equal(3);
</code></pre>

<h4>
<a id="text" class="anchor" href="#text" aria-hidden="true"><span class="octicon octicon-link"></span></a>text</h4>

<p>Returns the content of an element</p>

<pre><code>client.element(".title").text.should.equal("Hello World!");
</code></pre>

<h4>
<a id="value" class="anchor" href="#value" aria-hidden="true"><span class="octicon octicon-link"></span></a>value</h4>

<p>Returns the value of the value attribute of an element</p>

<pre><code>client.element("option").value.should.equal("0");
</code></pre>

<h4>
<a id="title" class="anchor" href="#title" aria-hidden="true"><span class="octicon octicon-link"></span></a>title</h4>

<p>Returns the title of the opened window</p>

<pre><code>client.open("http://google.com").title.should.equal("Google");
</code></pre>

<h4>
<a id="not" class="anchor" href="#not" aria-hidden="true"><span class="octicon octicon-link"></span></a>not</h4>

<p>Reverts the assertion. So for example, these 2 statements are equivalent</p>

<pre><code>client.elements("li").length.should.be.at.least(10);
client.elements("li").length.should.not.be.below(10);
</code></pre>

<h4>
<a id="expect-to-be-at-and-should" class="anchor" href="#expect-to-be-at-and-should" aria-hidden="true"><span class="octicon octicon-link"></span></a>expect, to, be, at, and, should</h4>

<p>These are just linking words to make the api more fluent and does not execute any code in the background. Thus these 2 statements are equivalent.</p>

<pre><code>client.elements("li").length.should.not.be.below(10);
client.elements("li").length.not.below(10);
</code></pre>

<h2>
<a id="how-to-extend-the-api" class="anchor" href="#how-to-extend-the-api" aria-hidden="true"><span class="octicon octicon-link"></span></a>How to extend the API</h2>

<h4>
<a id="addcommandname-fn" class="anchor" href="#addcommandname-fn" aria-hidden="true"><span class="octicon octicon-link"></span></a>addCommand(name, fn)</h4>

<p>Add a chainable function to the client object.</p>

<pre><code>client.addCommand("login", function(username, password){
    return page.open("http://whatever.com/login")
        .wait('input.login')
            .type(username)
            .pressKey("TAB")
            .type(password)
            .click(".btn-submit");
});
</code></pre>

<p>now you can use login as any other commands in your api
    client.login("admin", "password")
          .open("/admin")
          ...</p>

<p>** Do not forget to return the object **</p>

<h4>
<a id="addpropertynames-fn" class="anchor" href="#addpropertynames-fn" aria-hidden="true"><span class="octicon octicon-link"></span></a>addProperty(names, fn)</h4>

<p>names: Array of aliases or string
fn: function that will be executed when the property is accessed</p>

<p>This method is used by the builder class to add all the properties in the client object. The fn function will be executed in the control flow and the 'this' object binded to the client object.
So it gives you access to the following properties.</p>

<ul>
<li>this._driver: the native selenium driver</li>
<li>this._flow: The webdriver.promise.controlFlow() - More info <a href="https://code.google.com/p/selenium/wiki/WebDriverJs#Control_Flows">https://code.google.com/p/selenium/wiki/WebDriverJs#Control_Flows</a>
</li>
<li>this._flag: the chai/lib/chai/utils.flag object which allows to keep in memory properties. This object is used to compare values in every assertion statements</li>
</ul>

<h5>
<a id="this-is-a-core-client-api-method-which-should-be-used-wisely-it-is-recommended-that-you-use-addcommand-to-extend-the-api" class="anchor" href="#this-is-a-core-client-api-method-which-should-be-used-wisely-it-is-recommended-that-you-use-addcommand-to-extend-the-api" aria-hidden="true"><span class="octicon octicon-link"></span></a>This is a core client api method which should be used wisely. It is recommended that you use 'addCommand' to extend the API</h5>

<pre><code>client.addProperty("length", function(){
    if(!this._flag("elements"))
        return 0;

    var value = this._flag("elements").length;

    this._flag("actual", value);
    return value;
});
</code></pre>

<h4>
<a id="addchainablemethodnames-fn" class="anchor" href="#addchainablemethodnames-fn" aria-hidden="true"><span class="octicon octicon-link"></span></a>addChainableMethod(names, fn)</h4>

<p>names: Array of aliases or string
fn: function that will be executed when the method is invoked</p>

<p>This method is used by the builder class to add all the commands in the client object. The fn function will be executed in the control flow and the 'this' object is binded to the client object.
See add properties for more details.</p>

<h5>
<a id="this-is-a-core-client-api-method-which-should-be-used-wisely-it-is-recommended-that-you-use-addcommand-to-extend-the-api-1" class="anchor" href="#this-is-a-core-client-api-method-which-should-be-used-wisely-it-is-recommended-that-you-use-addcommand-to-extend-the-api-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>This is a core client api method which should be used wisely. It is recommended that you use 'addCommand' to extend the API</h5>

<pre><code>client.addChainableMethod(["element", "findFirstElement"], function(cssSelector){
    var that = this;
    return this._driver.findElement(By.css(cssSelector)).then(function(el){
        that._flag("element", el);
        return el;
    });
}
</code></pre>

<h2>
<a id="how-to-write-tests" class="anchor" href="#how-to-write-tests" aria-hidden="true"><span class="octicon octicon-link"></span></a>How to write tests</h2>

<p>Choose your favourite test runner. Jasmine, mocha...</p>

<p>Then you can chain your api calls as much as you like.</p>

<pre><code>    it("list should allow selection with tab", function(done){
        page.activeElement.type("GBP")
            .pressKey("tab")
            .cssClass.should.contains("btn-swap")
            .and.element("[ccy-pair-input]").value.should.equal("GBPAED")
            .then(done);
    });
</code></pre>

<h4>
<a id="check-the-example-folder-for-more-example-of-tests-and-extensions-runnable-with-mocha" class="anchor" href="#check-the-example-folder-for-more-example-of-tests-and-extensions-runnable-with-mocha" aria-hidden="true"><span class="octicon octicon-link"></span></a>Check the example folder for more example of tests and extensions runnable with mocha</h4>

<h2>
<a id="todo" class="anchor" href="#todo" aria-hidden="true"><span class="octicon octicon-link"></span></a>TODO</h2>

<ul>
<li><p>Integrate it with BrowserStack</p></li>
<li><p>Write Unit Tests</p></li>
</ul>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/dtassone/engynejs/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/dtassone/engynejs/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/dtassone/engynejs"></a> is maintained by <a href="https://github.com/dtassone">dtassone</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>
